(this.webpackJsonpdogs=this.webpackJsonpdogs||[]).push([[4],{40:function(e,t,a){"use strict";var n=a(0),c=a.n(n);t.a=function(e){return c.a.createElement("div",{className:"message message--".concat(e.type),"data-qa":"messages",role:"complementary"},e.message&&""!==e.message?e.message:"Something sinister has happened")}},68:function(e,t,a){"use strict";a.r(t);var n=a(39),c=a(0),r=a.n(c),o=a(21),s=a(49),i=a.n(s),l={ENVIRONMENT:"dev",BASE_URL:{dev:"https://dog.ceo",prod:"https://dog.ceo"},API_VERSION:"api"},d=function(){var e={},t=e;return e._getUrl=function(e){return"".concat(l.BASE_URL[l.ENVIRONMENT],"/").concat(l.API_VERSION,"/").concat(e)},e.get=function(e){var a=t._getUrl(e);return i.a.get(a)},e.post=function(e,a){var n=t._getUrl(e);return i.a.post(n,a)},e.put=function(e,a){var n=t._getUrl(e);return i.a.put(n,a)},e.delete=function(e){var a=t._getUrl(e);return i.a.delete(a)},e.isSuccessResponse=function(e){return!(!e.hasOwnProperty("status")||"success"!==e.status||!e.hasOwnProperty("message"))},{get:e.get,post:e.post,put:e.put,delete:e.delete,isSuccessResponse:e.isSuccessResponse}}(),u=function(){return new Promise((function(e,t){d.get("breeds/list/all").then((function(a){var c=function(e){var t=[];return d.isSuccessResponse(e)&&Object.entries(e.message).forEach((function(e){var a=Object(n.a)(e,2),c=a[0],r=a[1],o={};o.name=c,o.species=Array.isArray(r)?r:[],t.push(o)})),t}(a.data);c.length?e(c):t("error")})).catch((function(){t("error")}))}))},g=function(e){return new Promise((function(t,a){d.get("breed/".concat(e,"/images")).then((function(e){d.isSuccessResponse(e.data)&&Array.isArray(e.data.message)?t(e.data.message):a("error")})).catch((function(){a("error")}))}))},m=function(){return{getDogs:u,getDogImages:g}},f=a(20),b=function(e){return r.a.createElement("button",{disabled:e.disabled,tabIndex:e.tabIndex,className:"dog-form__button dog-select__item  ".concat(!0===e.disabled?"dog-form__button--disabled":""),onClick:e.handleClick,"data-qa":e.idQa},e.label)},p=function(e){return r.a.createElement(r.a.Fragment,null,e.label&&r.a.createElement("label",null,"props.label"),r.a.createElement("select",{"aria-required":e.required,tabIndex:e.tabIndex,className:"dog-form__select dog-select__item ".concat(e.disabled?"dog-form__select--disabled":""),disabled:e.disabled,onChange:function(t){return e.handleOnChange(t.target.value)},"data-qa":e.idQa},e.noSelectionLabel&&r.a.createElement("option",{value:e.valueNoSelection},e.noSelectionLabel),Array.isArray(e.list)&&e.list.map((function(e){return r.a.createElement("option",{value:e.key,key:e.key},e.value)}))))},S=function(e){var t=Object(c.useState)("noDogSelected"),a=Object(n.a)(t,2),o=a[0],s=a[1],i=Object(c.useState)("noDogSelected"),l=Object(n.a)(i,2),d=l[0],u=l[1],g=function(){var t=e.list.filter((function(e){return e.name===o}));return t.length?t[0].species.map((function(e){return{key:e,value:e}})):[]};return r.a.createElement("nav",{className:"dog-form dog-select__container",role:"navigation"},r.a.createElement(p,{required:!0,noSelectionLabel:"Select",valueNoSelection:"noDogSelected",tabIndex:1,idQa:"selectDog",handleOnChange:function(e){s(e),u("noDogSelected")},list:e.list.map((function(e){return{key:e.name,value:e.name+(e.species.length>0?" *":"")}}))}),r.a.createElement(p,{required:!1,noSelectionLabel:"Select",valueNoSelection:"noDogSelected",tabIndex:2,idQa:"selectSpecie",handleOnChange:u,list:g(),disabled:!g().length}),r.a.createElement(b,{label:"Images",disabled:"noDogSelected"===o||e.disabledActions,tabIndex:3,handleClick:function(){"noDogSelected"===o||e.disabledActions||e.onSelectDog({dog:o,specie:d})},idQa:"submitSelectDog"}))},h=function(e){var t=Object(c.useState)("card-dog__image--horizontal"),a=Object(n.a)(t,2),o=a[0],s=a[1];return r.a.createElement("div",{className:"card-dog"},r.a.createElement("figure",{className:"card-dog__figure"},r.a.createElement("img",{onLoad:function(e){var t;(t=e.target).naturalHeight>t.naturalWidth&&s("card-dog__image--vertical")},className:"card-dog__image "+o,src:e.dogImg,alt:e.dogImg})))},v=function(e){return r.a.createElement("div",{className:"container-dog",role:"main","data-qa":"dogsList"},e.dogSelected.images.map((function(e,t){return r.a.createElement(h,{dogImg:e,key:t})})))},_=function(){return r.a.createElement("div",{className:"container-dog","data-qa":"dogsListPreload"},r.a.createElement("div",{className:"card-dog card-dog__preload"}),r.a.createElement("div",{className:"card-dog card-dog__preload"}),r.a.createElement("div",{className:"card-dog card-dog__preload"}))},E=a(40);t.default=function(){var e=Object(c.useState)(!1),t=Object(n.a)(e,2),a=t[0],s=t[1],i=Object(c.useState)(!1),l=Object(n.a)(i,2),d=l[0],u=l[1],g=Object(c.useState)(!1),b=Object(n.a)(g,2),p=b[0],h=b[1],O=Object(c.useState)(""),N=Object(n.a)(O,2),j=N[0],y=N[1],D=Object(o.c)((function(e){return e.dogsReducer.dogs})),I=Object(o.c)((function(e){return e.dogsReducer.dogSelected})),A=Object(o.b)(),R=Object(f.a)(),k=R.fetchDogs,q=R.selectDog,L=R.unselectDog,w=m(),x=w.getDogs,C=w.getDogImages;Object(c.useEffect)((function(){D.length||(s(!0),x().then((function(e){s(!1),Array.isArray(e)&&A(k(e))})).catch((function(e){s(!1),h(!0),y(e)})))}),[A,D.length,x,k]);var P=function(e,t){u(!0),C(e).then((function(e){if(u(!1),Array.isArray(e)){var a={dog:t.dog,specie:t.specie,species:D.filter((function(e){return e.name===t.dog})).map((function(e){return e.species})),images:e};A(q(a))}})).catch((function(e){s(!1),h(!0),y("Error loading data "+e)}))};return r.a.createElement("section",{className:"page view-dogs"},!0!==a&&!0===p&&r.a.createElement(E.a,{type:"error",message:j,"aria-hidden":!p}),r.a.createElement(S,{list:D,disabledActions:d,onSelectDog:function(e){if(!("noDogSelected"===e.dog||e.dog===I.dog&&"noDogSelected"===I.specie||e.dog===I.dog&&I.specie===e.specie)){var t=e.dog;"noDogSelected"!==e.specie&&(t+="/"+e.specie),A(L()),P(t,e)}}}),!0===d&&r.a.createElement(_,{"aria-hidden":!d}),!1===d&&r.a.createElement(v,{dogSelected:I,"aria-hidden":d}))}}}]);
//# sourceMappingURL=4.b6fec181.chunk.js.map